name: 'Testing chatbot with botium'
description: 'Apply botium testing to check the quality of your chatbot'
inputs:
  format:
    description: 'Chatbot technology used'
    required: true
  version:
    description: 'Version of techonology used'
    required: true
  repository:
    description: 'Repository name with owner'
    required: true
    default: ${{ github.repository }} 
outputs:
  modified-dockerfile:
    description: 'Contenido del Dockerfile modificado' 
runs:
  using: 'composite'
  steps:
    - name: Modificar Dockerfile
      run: |
        # Obtener el valor de entrada
        FROM=${{ inputs.format }}
        
        # Generar el contenido modificado del Dockerfile
        if [ "$FROM" = "Rasa" ]; then
          MODIFIED_DOCKERFILE=$(sed 's/FROM .*/FROM imagen1/' Dockerfile)
        elif [ "$FROM" = "valor2" ]; then
          MODIFIED_DOCKERFILE=$(sed 's/FROM .*/FROM imagen2/' Dockerfile)
        else
          echo "Valor de entrada no v√°lido"
          exit 1
        fi
        
        # Imprimir el contenido modificado del Dockerfile
        echo "::set-output name=modified-dockerfile::$MODIFIED_DOCKERFILE"